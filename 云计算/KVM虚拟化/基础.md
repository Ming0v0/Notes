# 什么是虚拟化技术

虚拟化：通过模拟计算机的硬件，来实现在同一台计算机上同时运行多个不同的操作系统的技术。

# 虚拟化软件的差别
- qemu：软件纯模拟全虚拟化软件，性能慢，兼容性好
- xen(半)：性能特别好，需要使用专业修改之后的内核，兼容性差。RedHat5.5之后从xen转向使用kvm
- KVM（Linux）：全虚拟机，他有硬件支持CPU，内置在Linux内核模块，而且不需要使用专门的内核，性能较好，兼容较好；Centos6使用KVM

# 安装KVM虚拟化管理工具

```shell
yum install libvirt virt-install qemu-kvm -y
```

- libvirt：虚拟机管理
- virt-install：安装虚拟机
- qemu-kvm：虚拟磁盘

KVM：Kernel-based Virtual Machine

# 安装一台KVM虚拟机

运行前需`systemctl start libvirtd`

```shell
virt-install --virt-type kvm --os-type=linux --os-variant rhel7 --name centos7 --memory 1024 --vcpus 1 --disk /opt/centos.raw,format=raw,size=10 --cdrom /opt/CentOS-7.0-x86_64-DVD-1708.iso --network network=default --graphics vnc,listen=0.0.0.0 --noautoconsole
```

# KVM虚拟机的virsh日常管理命令

- 列表 `virsh list 虚拟机名称`
- 开机 `virsh start 虚拟机名称`
- 关机 `virsh shutdown 虚拟机名称`
- 拔电源关机 `virsh destroy 虚拟机名称`
- 重启 `virsh reboot 虚拟机名称`
- 导出配置 `virsh dumpxml 虚拟机名称`
- 删除 `virsh undefine 虚拟机名称` 只删除虚拟机配置文件 不会删除虚拟机磁盘文件
- 导入配置 `virsh define 虚拟机名称` 需要拥有虚拟机磁盘文件
