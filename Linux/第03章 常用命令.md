# 开机、重启和用户登录注销

## 关机&重启命令

**shutdown**
```txt
shutdown [选项] [时间]
```

参数
- -h now : 表示立即关机
- -h 1 : 表示 1 分钟后关机
- -r now:  立即重启

**halt**
就是直接使用，效果等价于关机

**reboot**
重启系统。

**syn**
把内存的数据同步到磁盘

**注意细节**
当我们关机或者重启时，都应该先执行以下 sync 指令，把内存的数据写入磁盘，防止数据丢失。

## 用户登录和注销

登录时尽量少用 root 帐号登录，因为它是系统管理员，最大的权限，避免操作失误。可以利用普通用户登录，登录后再用`su 用户名`命令来切换成系统管理员身份.

在提示符下输入 `logout` 即可注销用户

**使用细节**

- logout 注销指令在图形运行级别无效，在 运行级别 3 下有效

# 用户管理

![](attachment/Pasted%20image%2020230912114921.png)
说明
- Linux 系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。
- Linux 的用户需要至少要属于一个组。

## 添加用户

**基本语法**
```txt
useradd  [选项] 用户名
```

**演示**
添加一个用户 xm
![](attachment/Pasted%20image%2020230912115342.png)

特别说明：
cd    表示 change directory, 切换目录.

**细节说明**
- 当创建用户成功后，会自动的创建和用户同名的家目录
- 也可以通过 `useradd -d 指定目录 新的用户名`，给新创建的用户指定家目录
![](attachment/Pasted%20image%2020230912115455.png)

## 给用户指定或者修改密码

**基本语法**
```
passwd 用户名
```

**演示**
给 xiaoming 指定密码
![](attachment/Pasted%20image%2020230912115643.png)

## 删除用户

**基本语法**
```
userdel  用户名
```

**演示**
删除用户 xm，但是要保留家目录
![](attachment/Pasted%20image%2020230913002839.png)

删除用户 xh 以及用户主目录
![](attachment/Pasted%20image%2020230913002845.png)

**细节**
在删除用户时，我们一般不会将家目录删除。

## 查询用户信息

**基本语法**
```
id  用户名
```

  
**演示**
案例 1：请查询 root 信息
![](attachment/Pasted%20image%2020230912121758.png)

**细节说明**
当用户不存在时，返回”无此用户”

## 切换用户

**介绍**
在操作 Linux 中，如果当前用户的权限不够，可以通过 su  指令，切换到高权限用户，比如 root。root在终端中的提示符是`#`,普通用户的提示符是`$`

**基本语法**
```
su 用户名
su - 用户名
```

这里带“-”和不带“-”的区别在于切换用户之后的环境变量不一样。


**演示**
创建一个用户 zf, ，指定密码，然后切换到 zf.
![](attachment/Pasted%20image%2020230912121326.png)

**细节说明**
- 从权限高的用户切换到权限低的用户，不需要输入密码，反之需要。
- 当需要返回到原来用户时，使用 exit 指令

如果后面没跟用户名，则默认为root

## 用户组

**介绍**
类似于角色，系统可以对有共性的多个用户进行统一的管理。

**增加组**
```
groupadd 组名
```

**案例演示**
![](attachment/Pasted%20image%2020230912121721.png)

---
  
**删除组**
```
groupdel 组名
```

案例演示
![](attachment/Pasted%20image%2020230912121732.png)

## 配置文件

**/etc/passwd 文件**
用户（user）的配置文件，记录用户的各种信息
每行的含义：用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录 Shell
![](attachment/Pasted%20image%2020230912121933.png)

**/etc/shadow 文件**
口令的配置文件
每行的含义：登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志

**/etc/group 文件**
![](attachment/Pasted%20image%2020230912122116.png)
组(group)的配置文件，记录 Linux 包含的组的信息
每行含义：组名:口令:组标识号:组内用户列表

# 实用指令

## 指定运行级别

运行级别说明

- 0：关机
- 1：单用户【找回丢失密码】
- 2：多用户状态没有网络服务
- 3：多用户状态有网络服务
- 4：系统未使用保留给用户
- 5：图形界面
- 6：系统重启

常用运行级别是 3 和 5 ，要修改默认的运行级别可改文件

`/etc/inittab 的 id:5:initdefault`:这一行中的数字

运行级别的示意图
![](attachment/Pasted%20image%2020230912122345.png)


### 切换到指定运行级别的指令

**基本语法**

```txt
init [012356]
```

![](attachment/Pasted%20image%2020230912122636.png)

案例 1： 通过 init 来切换不同的运行级别，比如动 5->3 ， 然后关机
```txt
init    3
init    5
init    0
```

如何找回 root 密码，如果我们不小心忘记 root  密码，怎么找回。

思路： 进入到 单用户模式，然后修改 root 密码。因为进入单用户模式，root 不需要密码就可以登录。

**总结**
开机->在引导时输入 回车键-> 看到一个界面输入 e -> 看到一个新的界面，选中第二行（编辑内核）在输入 e->  在这行最后输入 1 ,再输入 回车键->再次输入 b ,这时就会进入到单用户模式。

这时，我们就进入到单用户模式，使用 passwd  指令来修改 root  密码。

## 帮助指令
当我们对某个指令不熟悉时，我们可以使用 Linux 提供的帮助指令来了解这个指令的使用方法。

### **man 获得帮助信息**

**基本语法**

```txt
man [命令或配置文件]（功能描述：获得帮助信息）
```

**演示**
案例：查看 ls 命令的帮助信息
![](attachment/Pasted%20image%2020230913003518.png)

---

### **help 指令**

```txt
help 命令 （功能描述：获得 shell 内置命令的帮助信息）
```

**演示**

案例：查看 cd 命令的帮助信息
![](attachment/Pasted%20image%2020230913003604.png)

  

## 文件目录类

### **pwd 指令**

基本语法
```txt
pwd (功能描述：显示当前工作目录的绝对路径)
```

**演示**
案例：显示当前工作目录的绝对路径
![](attachment/Pasted%20image%2020230913003633.png)

  

---

### **ls 指令**

基本语法
```txt
ls   [选项]  [目录或是文件]
```

常用选项
- -a ：显示当前目录所有的文件和目录，包括隐藏的。
- -l    ：以列表的方式显示信息

**演示**
案例:查看当前目录的所有内容信息
![](attachment/Pasted%20image%2020230912161800.png)

  
![](attachment/Pasted%20image%2020230912161807.png)

---

### **cd 指令**

基本语法
```txt
cd    [参数] (功能描述：切换到指定目录)
```

常用参数
- 绝对路径和相对路径

> **如何理解绝对路径和相对路径**
> 绝对路径是指**从文件系统的根目录开始指定文件或目录的位置**，它包含了完整的路径信息。例如，在Windows系统中，绝对路径可能是`C:\Users\myuser\Documents\file.txt`，在Unix/Linux系统中，绝对路径可能是`/home/myuser/Documents/file.txt`。无论当前所在的工作目录是什么，绝对路径都可以准确地定位到文件或目录。
> 
> 相对路径是相对于当前目录或当前文件位置的路径。它**指定的是文件或目录与当前位置的相对关系**。相对路径可以简化路径的输入。例如，当前目录下的文件file.txt的相对路径可能是`./file.txt`或者`file.txt`，其中"."表示当前目录。父目录中的文件的相对路径可能是`../file.txt`，其中".."表示父目录。
> 
> **总结起来，绝对路径是从根目录开始指定文件或目录的路径，相对路径是相对于当前位置指定文件或目录的路径。**

- `cd ~`  回到自己的家目录；直接输入`cd`命令，等同于输入`cd ~`，这里`~`是个变量，表示当前用户的家目录

- `cd ..` 回到当前目录的上一级目录

**演示**
案例 1：使用绝对路径切换到 root 目录
```txt
cd  /root
```

案例 2：使用相对路径到/root 目录
这里我们需要知道该用户目录在哪个目录下，才能写出这个指令，假设在`/usr/lib 
```txt
cd   ../../root
```

案例 3：表示回到当前目录的上一级目录
```txt
cd ..
```

案例 4：回到家目录cd
```txt
cd ~
```

---

### **mkdir 指令**

mkdir 指令用于创建目录(make directory)

基本语法
```txt
mkdir [选项]  要创建的目录
```
  
常用选项
- -p ：创建多级目录

**演示**
案例 1：创建一个目录 `/home/dog`
![](attachment/Pasted%20image%2020230912162720.png)

案例 2：创建多级目录 /home/animal/tiger
![](attachment/Pasted%20image%2020230912162752.png)

--- 
### rmdir 指令

rmdir 指令删除空目录

基本语法
```txt
rmdir [选项]  要删除的空目录
```

**演示**
案例 1：删除一个目录 /home/dog
![](attachment/Pasted%20image%2020230912162911.png)

**使用细节**
`rmdir` 删除的是空目录，如果目录下有内容时无法删除的。
提示：如果需要删除非空目录，需要使用  `rm -rf` 要删除的目录

![](attachment/Pasted%20image%2020230912162959.png)

---

### **touch 指令**

touch 指令用于创建文件或者更新一个文件的时间，如果文件不存在，则会把这个文件创建出来；如果存在，则会更新这个文件的时间。

**基本语法**
```txt
touch 文件名称
```

**演示**
案例 1：创建一个空文件 hello.txt
![](attachment/Pasted%20image%2020230912163113.png)

![](attachment/Pasted%20image%2020230912163119.png)

--- 

### **cp 指令**

cp 指令拷贝文件到指定目录

基本语法
```txt
cp [选项] source dest
```

拷贝一个文件时，相当于新创建一个文件。出文件的内容相同外，文件的时间显示的也是创建这个文件的时间

常用选项
- -r ：递归复制整个文件夹
- -p：拷贝一个文件时，如果想把文件的属性一起拷贝过去，就需要加上`-p`选项
- -a：如果拷贝目录，同时想保持目录属性不变，可以用`-rp`选项，或者`-a`选项。`-a`选项中包括一系列其他选项如`-r`,`-p`等的功能

演示
案例 1：将 `/home/aaa.txt`  拷贝到` /home/bbb` 目录下(拷贝单个文件)
![](attachment/Pasted%20image%2020230912163313.png)

案例 2：递归复制整个文件夹，举例
将`/home/test `整个目录拷贝到` /home/zwj` 目录
![](attachment/Pasted%20image%2020230912163330.png)


**使用细节**

强制覆盖不提示的方法：`\cp`

![](attachment/Pasted%20image%2020230912163514.png)

---

ws### **rm 指令**

rm 指令移除【删除】文件或目录

基本语法
```txt
rm  [选项]  要删除的文件或目录
```

常用选项
- -r ：递归删除整个文件夹
- -f ： 强制删除不提示

**演示**
案例 1: 将 /home/aaa.txt  删除
![](attachment/Pasted%20image%2020230912163733.png)

  
案例 2：递归删除整个文件夹 /home/bbb
![](attachment/Pasted%20image%2020230912163829.png)

**使用细节**
强制删除不提示的方法：带上 -f 参数即可

![](attachment/Pasted%20image%2020230912163847.png)

--- 

### **mv 指令**

mv 移动文件与目录或重命名

基本语法
```txt
mv oldNameFile newNameFile       (功能描述：重命名) 
mv /temp/movefile /targetFolder  (功能描述：移动文件)
```

**演示**
案例 1: 将 /home/aaa.txt  文件 重新命名为 pig.txt
![](attachment/Pasted%20image%2020230912164005.png)

案例 2:将 /home/pig.txt     文件 移动到 /root 目录下
![](attachment/Pasted%20image%2020230912164035.png)

--- 

### **cat 指令**

cat 查看文件内容，是以只读的方式打开。

基本语法
```txt
cat [选项] 要查看的文件
```

常用选项
- -n ：显示行号

**演示**
案例 1:  /etc/profile    文件内容，并显示行号
![](attachment/Pasted%20image%2020230912164150.png)

• 使用细节
cat 只能浏览文件，而不能修改文件，为了浏览方便，一般会带上
`管道命令 | more cat 文件名 | more [分页浏览]`

---

### **more 指令**

more 指令是一个基于VI 编辑器的文本过滤器，**它以全屏幕的方式按页显示文本文件的内容**。more 指令中内置了若干快捷键，详见操作说明

基本语法
```txt
more 要查看的文件
```

演示
案例: 采用 more 查看文件
![](attachment/Pasted%20image%2020230912164446.png)

快捷键栏

| 操作   | 功能说明                             |
| ------ | ------------------------------------ |
| 空白键 | 代表向下翻一页                       |
| Enter  | 代表向下翻一行                       |
| q      | 代表立刻离开more，不再显示该文件内容 |
| Ctrl+F | 向下滚动一屏                         |
| Ctrl+B | 返回上一屏                           |
| =      | 输出当前行的行号                     |
| 冒号:+f     | 输出文件名和当前行的行号   |

---

### **less 指令**

less 指令用来分屏查看文件内容，它的功能与more 指令类似，但是比 more 指令更加强大，支持各种显示终端。less 指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，**对于显示大型文件具有较高的效率**。

基本语法
```txt
less 要查看的文件
```


演示
案例: 采用 less 查看一个大文件文件 `/opt/金庸-射雕英雄传 txt 精校版.txt`
![](attachment/Pasted%20image%2020230912164652.png)

快捷键


| 操作     | 功能说明                                     |
| -------- | -------------------------------------------- |
| 空白键   | 向下翻的一页                                 |
| PageDown | 向下翻动一页                                 |
| PageUP   | 向上翻动一页                                 |
| /字符    | 向下搜寻字串的功能。n：向下查找，N：向上查找 |
| ?字串    | 向上搜寻字串的功能。n：向上查找，N：向下查找 |
| q        | 离开less这个程序                                             |

---

### **> 指令 和 >>  指令**

\> 指令 和 >> 指`
- \> 输出重定向 : 会将原来的文件的内容覆盖
- \>> 追加： 不会覆盖原来文件的内容，而是追加到文件的尾部。

基本语法
```txt
ls -l > 文件  （功能描述：列表的内容写入文件 a.txt 中（覆盖写））
```

![](attachment/Pasted%20image%2020230913005914.png)

说明：ls -l > a.txt , 将 ls -l 的显示的内容覆盖写入到 a.txt 文件，如果该文件不存在，就创建该文件。

```txt
ls -al >>文件       （功能描述：列表的内容追加到文件 aa.txt 的末尾）
```

![](attachment/Pasted%20image%2020230912165016.png)

```txt
cat 文件 1 > 文件 2 （功能描述：将文件 1 的内容覆盖到文件 2）
```
![](attachment/Pasted%20image%2020230912165053.png)

```txt
echo "内容" >> 文件
```

**演示**
案例 1：将 /home 目录下的文件列表 写入到 /home/info.txt  中
![](attachment/Pasted%20image%2020230912165233.png)

案例 2：将当前日历信息 追加到  /home/mycal 文件中
![](attachment/Pasted%20image%2020230912165305.png)

--- 

### **echo 指令**

echo 输出内容到控制台。

基本语法
```txt
echo [选项] [输出内容]
```

**演示**
案例: 使用 echo 指令输出环境变量,输出当前的环境路径
![](attachment/Pasted%20image%2020230912165536.png)

案例: 使用 echo 指令输出 hello,world!
![](attachment/Pasted%20image%2020230912165710.png)

---

### **head 指令**

head 用于显示文件的开头部分内容，默认情况下 head 指令显示文件的前 10 行内容

基本语法
```txt
head  文件 (功能描述：查看文件头 10 行内容)
head -n 5 文件  (功能描述：查看文件头 5 行内容，5 可以是任意行数)
```

演示
案例：查看/etc/profile 的前面 5 行代码
![](attachment/Pasted%20image%2020230912165830.png)

--- 

### **tail 指令**

tail 用于输出文件中尾部的内容，默认情况下 tail 指令显示文件的后 10 行内容。
基本语法

```txt
tail  文件        （功能描述：查看文件后 10 行内容）
tail  -n 5 文件   （功能描述：查看文件后 5 行内容，5 可以是任意行数）
tail  -f    文件  （功能描述：实时追踪该文档的所有更新，工作经常使用）
```

**演示**
案例 1：查看/etc/profile 最后 5 行的代码
![](attachment/Pasted%20image%2020230912170106.png)

案例 2：实时监控 mydate.txt ,  看看到文件有变化时，是否看到， 实时的追加日期
![](attachment/Pasted%20image%2020230912170149.png)

--- 

### **ln 指令**

软链接也叫符号链接，类似于 windows 里的快捷方式，主要存放了链接其他文件的路径

基本语法
```txt
ln -s [原文件或目录] [软链接名] （功能描述：给原文件创建一个软链接）
```

演示
案例 1：在/home 目录下创建一个软连接 linkToRoot，连接到 /root  目录
![](attachment/Pasted%20image%2020230912170343.png)

案例 2：删除软连接 linkToRoot
![](attachment/Pasted%20image%2020230912170403.png)

**细节说明**
当我们使用 pwd 指令查看目录时，仍然看到的是软链接所在目录。

--- 

### **history 指令**

查看已经执行过历史命令,也可以执行历史指令

基本语法
```txt
history   （功能描述：查看已经执行过历史命令）
```

执行 `history -c` 命令可以清除所有历史命令

演示
案例 1: 显示所有的历史命令
![](attachment/Pasted%20image%2020230912170519.png)

案例 2: 显示最近使用过的 10 个指令。
![](attachment/Pasted%20image%2020230912170530.png)

案例 3：执行历史编号为 178 的指令
![](attachment/Pasted%20image%2020230912170626.png)

## 时间日期类

**date 指令**

显示当前日期

基本语法
```txt
date         （功能描述：显示当前时间）
date +%Y     （功能描述：显示当前年份）
date +%m     （功能描述：显示当前月份）
date +%d     （功能描述：显示当前是哪一天）
date "+%Y-%m-%d %H:%M:%S"（功能描述：显示年月日时分秒）
```

• 演示
案例 1：显示当前时间信息
![](attachment/Pasted%20image%2020230912170927.png)

案例 2：显示当前时间年月日
![](attachment/Pasted%20image%2020230912170937.png)

案例 3：显示当前时间年月日时分秒
![](attachment/Pasted%20image%2020230912170949.png)

**设置日期**

基础语法
```txt
date -s 字符串时间
```

演示
案例 1: 设置系统当前时间 ， 比如设置成 `2018-10-10 11:22:22`
![](attachment/Pasted%20image%2020230912190238.png)

---

**cal 指令**

查看日历指令

基本语法
```txt
cal [选项] （功能描述：不加选项，显示本月日历）
```

演示
案例 1: 显示当前日历
![](attachment/Pasted%20image%2020230912190322.png)

案例 2: 显示 2020 年日历
![](attachment/Pasted%20image%2020230912190341.png)

##  搜索查找类

**find 指令**

find 指令将从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端。

基本语法
```txt
find    [搜索范围]    [选项]
```

**选项说明**
| 选项            | 功能                             |
| --------------- | -------------------------------- |
| -name<查询方式> | 按照指定的文件名查找模式查找文件 |
| -user<用户名>   | 查找属于指定用户名所有文件       |
| -size<文件大小  | 按照指定的文件大小查找文件       |
|                 |                                  |

**演示**
案例 1：按文件名：根据名称查找/home 目录下的 hello.txt 文件
![](attachment/Pasted%20image%2020230912190517.png)

案例 2：按拥有者：查找/opt 目录下，用户名称为 nobody 的文件
![](attachment/Pasted%20image%2020230912190539.png)

案例 3：查找整个 linux 系统下大于 20m 的文件（+n 大于 -n 小于 n 等于）
![](attachment/Pasted%20image%2020230912190607.png)


![](attachment/Pasted%20image%2020230912190615.png)

![](attachment/Pasted%20image%2020230912190623.png)

1m = 1024k
![](attachment/Pasted%20image%2020230912190813.png)

查询  / 目录下，所有 .txt 的文件
![](attachment/Pasted%20image%2020230912190825.png)

---

**locate 指令**

locaate 指令可以快速定位文件路径。locate 指令利用事先建立的系统中所有文件名称及路径的locate 数据库实现快速定位给定的文件。Locate 指令无需遍历整个文件系统，查询速度较快。为了保证查询结果的准确度，管理员必须定期更新 locate 时刻。

基本语法
```txt
locate 搜索文件
```

**特别说明**
由于 locate 指令基于数据库进行查询，所以第一次运行前，必须使用 updatedb 指令创建 locate 数据库。

**演示**
案例 1: 请使用 locate 指令快速定位 hello.txt 文件所在目录
![](attachment/Pasted%20image%2020230912190950.png)

---

**grep 指令和 管道符号 |**

grep 过滤查找 ， 管道符，`|`，表示将前一个命令的处理结果输出传递给后面的命令处理。

基本语法
```txt
grep [选项] 查找内容 源文件
```

**常用选项**
| 选项 | 功能             |
| ---- | ---------------- |
| -n   | 显示匹配行及行号 |
| -i   | 忽略字母大小写                 |

演示
案例 1: 请在 hello.txt  文件中，查找 "yes"    所在行，并且显示行号
![](attachment/Pasted%20image%2020230912191117.png)

## 压缩和解压类

**gzip/gunzip 指令**

gzip 用于压缩文件， gunzip  用于解压的

基本语法
```txt
gzip 文件   （功能描述：压缩文件，只能将文件压缩为*.gz 文件）

gunzip 文件.gz   （功能描述：解压缩文件命令）
```

演示
案例 1: gzip 压缩， 将 /home 下的 hello.txt 文件进行压缩
![](attachment/Pasted%20image%2020230912191250.png)

案例 2: gunzip 压缩， 将 /home 下的 hello.txt.gz 文件进行解压缩
![](attachment/Pasted%20image%2020230912191303.png)

细节说明
当我们使用 gzip  对文件进行压缩后，不会保留原来的文件。

--- 

**zip/unzip 指令**

zip 用于压缩文件， unzip 用于解压的，这个在项目打包发布中很有用的

基本语法
```txt
zip    [选项] XXX.zip    将要压缩的内容（功能描述：压缩文件和目录的命令）
unzip  [选项] XXX.zip （功能描述：解压缩文件）
```

zip 常用选项
- -r：递归压缩，即压缩目录

unzip 的常用选项
- -d<目录> ：指定解压后文件的存放目录

演示
案例 1:     将 /home 下的 所有文件进行压缩成 mypackage.zip
![](attachment/Pasted%20image%2020230912191432.png)

![](attachment/Pasted%20image%2020230912191440.png)

案例 2:    将 mypackge.zip 解压到 /opt/tmp 目录下
![](attachment/Pasted%20image%2020230912191455.png)

---
**tar 指令**

tar 指令 **是打包指令**，最后打包后的文件是 .tar.gz 的文件。

基本语法

```txt
tar    [选项]    XXX.tar.gz   打包的内容   
(功能描述：打包目录，压缩后的文件格式.tar.gz)
```

选项说明
| 选项 | 功能               |
| ---- | ------------------ |
| -c   | 产生.tar打包文件   |
| -v   | 显示详细信息       |
| -f   | 指定压缩后的文件名 |
| -z   | 打包同时压缩       |
| -x   | 解压.tar文件       |

**演示**
案例 1：压缩多个文件，将 `/home/a1.txt 和 /home/a2.txt`  压缩成`a.tar.gz`
![](attachment/Pasted%20image%2020230912191647.png)

案例 2：将/home 的文件夹 压缩成 myhome.tar.gz
![](attachment/Pasted%20image%2020230912191658.png)

案例 3：将 a.tar.gz 解压到当前目录
![](attachment/Pasted%20image%2020230912191707.png)

案例 4：将 myhome.tar.gz  解压到 /opt/ 目录下
![](attachment/Pasted%20image%2020230912191717.png)

指定解压到的那个目录，事先要存在才能成功，否则会报错。