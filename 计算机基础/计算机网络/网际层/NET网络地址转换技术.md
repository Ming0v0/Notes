
NAT技术主要用于实现内部网络的主机访问外部网络。一方面NAT缓解了IPv4地址短缺的问题，另一方面NAT技术让外网无法直接与使用私有地址的内网进行通信，提升了内网的安全性

**NAT产生背景**

- 随着互联网用户的增多，IPv4的公有地址资源显得越发短缺
- 同时IPv4公有地址资源存在地址分配不均的问题，这导致部分地区的IPv4可用公有地址严重不足
- 为解决该问题，使用过渡技术解决IPV4公有地址短缺就显得尤为必要

**IP地址**
- 公有地址：由专门的机构管理、分配，可以在Internet上直接通信的IP地址。
- 私有地址：组织和个人可以任意使用，无法在internet上直接通信，只能在内网
- 使用的IP地址A、B、C类地址中各预留了一些地址专门作为私有IP地址:
- A类：`10.0.0.0 ~ 1 0.255.255.255`
- B类：`172.16.0.0 ~ 172.31.255.255`
- C类：`192.168.0.0 ~ 192.168.255.255`

![](attachment/Pasted%20image%2020231110141444.png)

**NET技术原理**

- NAT：对IP数据报文中的IP地址进行转换，是一种在现网中被广泛部署的技术，一般部署在网络出口设备，例如路由器或防火墙上
- NAT的典型应用场景：在私有网络内部(园区、家庭)使用私有地址，出口设备部署NAT，对于“从内到外的流量，网络设备通过NAT将数据包的源地址进行转换(转换成特定的公有地址)，而对于“从外到内的流量，则对数据包的目的地址进行转换
- 通过私有地址的使用结合NAT技术，可以有效节约公网IPV4地址

![](attachment/Pasted%20image%2020231110141746.png)

# 静态NET

- 静态NAT：每个私有地址都有一个与之对应并且固定的公有地址，即私有地址和公有地址之间的关系是一对一映射。
- 支持双向互访：私有地址访问internet经过出口设备NAT转换时，会被转换成对应的公有地址。同时，外部网络访问内部网络时，其报文中携带的公有地址(目的地址)也会被NA设备转换成对应的私有地址

![](attachment/Pasted%20image%2020231110141938.png)

![](attachment/Pasted%20image%2020231110142016.png)

方式一：接口视图下配置静态NAT

出接口配置
```txt
[Huawei-GigabitEthernet0/0/0] nat static global {global-address} inside {host-address}
```

- global参数用于配置外部公有地址
- inside参数用于配置内部私有地址。

方式二：系统视图下配置静态NAT

```txt
[Huawei] nat static global {global-address} inside {host-address}
``` 

配置命令相同，视图为系统视图，之后在具体的接口下开启静态NAT

```txt
[Huawei-GigabitEthernet0/0/0] nat static enable
```

在接口下使能nat static功能