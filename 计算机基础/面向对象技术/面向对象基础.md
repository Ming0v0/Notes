# 面向对象的基本概念
Peter Coad和 Edward Yourdon提出用下面的等式识别面向对象方法，即

> 面向对象=对象+分类+继承+通过消息的通信

可以说，采用这4个概念开发的软件系统是面向对象的。
1. **对象**
	在面向对象的系统中，对象是基本的运行时的实体，它既包括数据(属性)，也包括作用于数据的操作(行为)，所以一个对象把属性和行为封装为一个整体。**封装是一种信息隐蔽技术，它的目的是使对象的使用者和生产者分离，使对象的定义和实现分开。** 从程序设计者来看，对象是一个程序模块；从用户来看，对象为他们提供了所希望的行为。在对象内的操作通常叫做方法。一个对象通常可由对象名、属性和操作三部分组成。
2. **消息**
	对象之间进行通信的一种构造叫做消息。但一个消息发送给某个对象时，包含要求接收对象去执行某些活动的信息，接收到消息的对象经过解释，然后予以响应，这种通信机制叫做消息传递。发送消息的对象不需要知道接收消息的对象如何对请求予以响应。
3. **类**
	一个类定义了一组大体上相似的对象，一个类所包含的方法和数据描述一组对象的共同行为和属性。类是在对象之上的抽象，对象是类的具体化、是类的实例。通常把一个类和这个类的所有对象称为“类及对象”或对象类。
4. **继承**
	继承是父类和子类之间共享数据和方法的机制。这是类之间的一种关系，在定义和实现一个类的时候，可以在一个已经存在的类的基础上进行，把这个已经存在的类所定义的内容作为自己的内容，并加入若干新的内容。
	一个父类可以有多个子类，这些子类都是父类的特例，父类描述了这些子类的公共属性和操作。一个子类可以继承它的父类(或祖先类)中的属性和操作，这些属性和操作在子类中不必定义，子类中还可以定义自己的属性和操作。
	如果一个子类只从一个父类得到继承，叫做“单重继承”；如果一个子类有两个或更多个父类，则称为“多重继承”。
5. **多态**
	不同的对象收到同一消息可以产生完全不同的结果，这一现象叫做多态。在使用多态的时候，用户可以发送一个通用的消息，而实现的细节则由接收对象自行决定，这样，把具有通用功能的消息存放在高层次，而把不同的实现这一功能的行为放在较低层次，在这些低层次上生成的对象能够给通用消息以不同的响应。
	多态有几种布控的形式，Cardelli和 Wegner把它分为四类，即
	通用的：参数的、包含的
	特定的：过载的、强制的
	其中，参数多态和包含多态称为通用的多态，过载多态和强制多态称为特定的多态。**包含多态**在许多语言中都存在，最常见的例子就是子类型化，即**一个类型是另一个类型的子类型**。**过载多态是同一个变量被用来表示不同功能而通过上下文以决定一个名字所代表的功能。**

6. **动态绑定**
	绑定是一个把过程调用和响应调用所需要执行的代码加以结合的过程。在一般程序设计语言中，绑定是在**编译时**进行的，叫做**静态绑定**。**动态绑定**则是在**运行时**进行的，因此，一个给定的过程调用和代码的结合是到调用发生时才进行的。
	动态绑定是和类的继承以及多态相联系的。在继承关系中，<u>子类是父类的一个特例，所以父类对象可以出现的地方，子类对象也可以出现</u>。因此在运行过程中，当一个对象发送消息请求服务时，要根据接收对象的具体情况将请求的操作与实现的方法进行连接，即动态绑定。

# 面向对象程序设计
面向对象程序设计(Object Oriented Programming, OOP)的实质是选用一种面向对象程序设计语言(OOPL)，采用对象、类及其相关概念所进行的程序设计。
好的OOPL必须至少支持被封装的对象、类和实例概念、类间的继承性和多态。
**面向对象的好处**
面向对象的好处总结如下。
（1）面向对象技术解决了产品质量和生产率之间的权衡问题。
（2）面向对象程序设计，特别是继承机制，使得系统具有很高的灵活性和易扩充性。
（3）面向对象是一个能管理复杂性并增强伸缩性的工具。
（4）根据面向对象的观点，以现实世界对应物为基础，把某一领域分割成各种对象进行分析与设计，常常比自顶向下进行功能分解的分析及设计更自然合理。
（5）从概念模型化到分析、设计、编码可以实现无缝传递。
（6）通过封装进行的信息隐蔽有助于建立安全的系统。

## 面向对象程序设计语言中的OOP机制
1. 类
	类具有实例化功能，包括实例生成和实例消除完成。类的实例化决定了类及其实例具有下面的特征。
	（1）同一个类的不同实例**具有相同的数据结构**，承受的是同一方法集合所定义的操作，因而具有规律相同的行为。
	（2）同一个类的不同实例**可以持有不同的值**，因而可以具有不同的状态。
	（3）实例的初始状态（初值）可以**在实例化时确定。**
2. 继承和类层次结构
	孤立的类只能描述实体集合的特征同一性，而客观世界中实体集合的划分还通常要考虑与实体特征方法有关联的相似性。在 OOP中使用继承机制解决这一问题。
	当执行一个子类的实例生成方法时，首先在类层次结构中从该子类沿继承路径上溯至它的一个基类，然后自顶向下地执行该子类的所有父类的实例生产方法，最后执行该子类实例生产方法的函数体。当执行一个子类的实例消除方法时，顺序正好与之相反：**先执行该子类的实例消除方法，再沿继承路径自底向上地执行该子类所有父类的实例消除方法。**
	类的实例化过程是一种实例的合成过程，而不仅仅是根据单个类型进行的空间分配、初始化和联编。指导编译程序进行这种合成的，就是类层次结构。
3. 对象、消息传递和方法
	对象是类的实例。尽管对象的表示在形式上与一般数据结构十分相似，但是它们之间存在本质区别：**对象之间通过消息传递方式进行通信。**
	消息传递原是一种与通信有关的概念，OOP使得对象具有交互能力的主要模型就是消息传递模型。对象被看成用传递消息的方式互相联系的通信实体，它们既可以接收，也可以拒绝外界发来的消息。一般情况下，对象接收它能够识别的消息，拒绝不能识别的消息。
	发送一条消息至少应给出一个对象的名字和要发送给这个对象的那条消息的名字。通常，消息的名字就是这个对象中外界可知的某个方法的名字。在消息中，还经常有一组参数，将外界的有关信息传递给这个对象。
	对于一个类来说，它关于方法界面的定义规定了实例的消息传递协议，而它本身则决定了消息传递到合法范围。
4. 对象自身引用
	对象自身引用是OOPLs 中的一种特有结构。这种结构在不同的OOPLs中有不同的名称，在C++和Java中称为this，在 Smalltalk-80、Object-C和其他一些OOPLs中则称为self。
	对象自身引用的值和类型分别扮演了两种意义的角色：**对象自身引用的值使得方法体中引用的成员名与特定的对象相关,对象自身引用的类型则决定了方法体被实际共享的范围。**
	对象自身引用机制使得在进行方法的设计和实现时并不需要考虑与对象联系的细节，而是从更高一级的抽象层次，也就是类的角度来设计同类型对象的行为特征，从而使得方法在一个类及其子类的范围内具有共性。
5. 重置
	重置的基本思想是:通过一种**动态绑定**机制的支持，使得**子类在继承父类界面定义的前提下，用适合于自己要求的实现去置换父类中的相应实现。**
	在OOPLs中，重置机制有相应的语法供开发人员选择使用。在CHt语言中，通过虚拟函数(Virtual Function)的定义来进行重置的声明，通过虚拟函数跳转表(Virtual FunctionsJump Tables，VTBL)结构来实现重置方法体的动态绑定。在 Java语言中，通过抽象方法(Abstract Method)来进行重置的声明，通过方法查找(Method Lookup)实现重置方法体的动态绑定。
6. 类属类
	类属是程序设计语言中普遍注重的一种**参数多态**机制。类属类可以看作类的模板。一个类属类是关于一组类的一个特性抽象，它强调的是这些类的成员特征中与**具体类型**无关的那些部分，而与具体**类型相关**的部分则用变元来表示。这就使得对类的集合也可以按照特性的相似性再次进行划分。类属类的一个重要作用,就是对类库的建设提供强有力的支持。
7. 无实例的类
	要创建无实例的类需要语言的支持。在C++和 Java 语言中，抽象类就是这样的类。在C++中通过在类中定义纯虚拟函数来创建一个抽象类，在Java中通过在类中定义抽象方法来创建一个抽象类，或者直接将一个类声明为抽象类。
## 面向对象的程序
类库是一种预先定义的程序库，可以由开发人员自己扩充。
类库以程序模块的形式，按照类层次结构把一组类的定义和实现组织在一起。通常，这一组类预先提供的是一些低层功能，这些功能覆盖了传统例程库所提供的功能。
开发人员可以利用类库中的类，其方式与使用语言中的基本类型完全相同。

# 面向对象开发技术
## 面向对象分析
面向对象分析的目的<u>是为了获得对应用问题的理解。理解的目的是确定系统的功能、性能要求。</u>
面向对象分析包含5个活动，即**认定对象、组织对象、描述对象间的相互作用、定义对象的操作和定义对象的内部信息。**
1. 认定对象
在应用领域中，按自然存在的实体确立对象。在定义域中，首先将自然存在的“名词”作为一个对象，这通常是研究问题、定义域实体的良好开始。通过实体间的关系寻找对象常常没有问题，而困难在于寻找(选择)系统关心的实质性对象，实质性对象是系统稳定性的基础。
2. 组织对象
分析对象间的关系，将相关对象抽象成类，其目的是为了简化关联对象，利用类的继承性建立具有继承性层次的类结构。抽象类时可从对象间的操作或一个对象是另一个对象的一部分来考虑，如房子由门和窗构成，门和窗是房子类的子类。由对象抽象类，通过相关类的继承构造类层次，所以说系统的行为和信息间的分析过程是一种迭代表征过程。
3. 描述对象间的相互作用
描述出各对象在应用系统中的关系，如一个对象是另一个对象的一部分、一个对象与其他对象间的通信关系等。这样可以完整地描述每个对象的环境，由一个对象解释另一个对象，以及一个对象如何生成另一个对象，最后得到对象的界面描述。
4. 定义对象的操作
当考虑对象的界面时，自然要考虑对象的操作。其操作有从对象直接标识的简单操作，如创建、增加和删除等;也有更复杂的操作，如将几个对象的信息连接起来。一般而言，应避免对象太复杂，当连接的对象很复杂时，可将其标识为新对象。当确定对象的操作后，再定义对象的内部。对象内部定义包括其内部数据信息、信息存储方法、继承关系以及可能生成的实例数等属性。

## 面向对象设计
面向对象设计的含义是设计分析模型和实现相应源代码，在目标代码环境中这种源代码可被执行。设计期间必须充分考虑系统的稳定性，这会影响系统的结构。
对象标识期间的目标是分析对象，设计过程也是发现对象的过程，称之为再处理。对象可以用预先开发的源代码实现，称这样的部分为构件。
## 面向对象测试
就测试而言，用面向对象方法开发的系统测试与其他方法开发的系统测试没有什么不同，在所有开发系统中都是根据规范说明来验证系统设计的正确性。程序调试步骤是从最底层开始，从单元测试、综合测试到系统测试。
一般来说，对面向对象软件的测试可分为下列4个层次进行。
（1）算法层。测试类中定义的每个方法，基本上相当于传统软件测试中的单元测试。
（2）类层。测试封装在同一个类中的所有方法与属性之间的相互作用。在面向对象软件中类是基本模块，因此可以认为这是面向对象测试中所特有的模块测试。
（3）模板层。测试一组协同工作的类之间的相互作用。大体上相当于传统软件测试中的集成测试，但是也有面向对象软件的特点(如对象之间通过发送消息相互作用)。
（4）系统层。把各个子系统组装成完整的面向对象软件系统，在组装过程中同时进行测试。

# 面向对象的分析与设计方法
Peter Coad和Edward Yourdon的OOA和OOD法和 OOA法
1. OOA
OOA模型由下列5个层次和5个活动组成。
（1）5个层次:主题层、对象类层、结构层、属性层、服务层。
（2）5个活动:标志对象类、标志结构、定义主题、定义属性、定义服务。
在这种方法中定义了两种对象类之间的结构，一种称为分类结构，另一种称为组装结构。
2. OOD
OOA中的5个层次和5个活动继续贯穿在OOD过程中。OOD模型由4个部分和4个活动组成。
4个活动是设计问题域部件、设计人机交互部件、设计任务管理部件、设计数据管理
部件。
**Booch的OOD法**
Booch认为软件开发是一个螺旋上升的过程，在螺旋上升的每个周期中有以下步骤。
（1）标识类和对象。
（2）确定它们的含义。
（3）标志它们之间的关系。
（4）说明每一个类的界面和实现。
除了类图、对象图、模块图、进程图外，Booch的 OOD中还使用了两种动态描述图，一种是刻画特定类实例的状态转换图，另一种是描述对象间事件变化的时序图。
**1. OMT法**
对象建模技术(OMT)定义了3种模型，即对象模型、动态模型和功能模型。OMT方法有4个步骤，即分析、系统设计、对象设计和实现。
1．对象模型、动态模型和功能模型
1)对象模型
OMT的对象模型中除了对象、类、继承外，还有一些其他的概念。
- 链和关联。链表示实例对象间的物理或概念上的连接。关联描述具有公共结构和
公共语义的一组链。
- 泛化。泛化是一个类与它的一个或多个细化类之间的关系，即一般与特殊的关系。被细化的类称为父类，每个细化的类称为子类，子类可以继承父类的特性。
- 聚集。聚集是一种整体与部分的关系，在这种关系中表示整体的对象与表示部分的对象关联。
- 模块。模块是组和类、关联和泛化的一种逻辑结构，模块给出了某个主题的视图。
2)动态模型
动态模型描述与时间和操作顺序有关的系统特征，包括激发事件、事件序列、确定事件先后关系以及事件和状态的组织。
3)功能模型
功能模型描述与值的变换有关的系统特征，包括功能、映射、约束和函数依赖。对象模型、动态模型和功能模型之间具有下述关系。
（1）与功能模型的关系。对象模型展示了功能模型中的动作者、数据存储和流的结构，动态模型展示了执行加工的顺序。
（2）与对象模型的关系。功能模型展示了类上的操作和每个操作的变量，因此它也表示了类之间的“供应者一客户”关系;动态模型展示了每个对象的状态以及它接收事件和改变状态时所执行的操作。
**2. OMT的步骤**
下面介绍OMT的步辣。
（1）分析。目的是建立可理解的现实世界模型。
（2）系统设计。确定整个系统的体系结构，形成求解问题和建立解答的高层次策略。
（3）对象设计。建立基于分析模型的设计模型，并考虑实现的细节，设计人员根据系统设计期间建立的策略把实现细节加入到设计模型中。
（4）实现。将对象设计阶段开发的对象类及其关系转换成特定的程序设计语言、数据库式神件。

**UML**
统一建模语言(UML)是面向对象软件的标准化建模语言。UML由3个要素构成，即UML 的基本构造块、支配这些构造块如何放置在一起的规则和运用于整个语言的一些公共机制。UML的词汇表包含3种构造块，即**事物、关系和图**。事物是对模型中最具代表性的成分的抽象，关系把事物结合在一起，图聚集了相关的事物。