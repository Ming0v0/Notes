# LVM简介

如果某个分区空间不够，想增加空间是非常困难。因为要添加一块新盘，就要涉及数据的迁移，导致上层业务停止。不符合企业的要求。最好能有一个办法，可以让我们扩容的同时，不需要动到原来的数据，也不需要停止业务。那么逻辑卷管理机制，就是解决上述问题的方案。

LVM全名是Logical volume Manager，即逻辑卷管理器。LVM的做法是将几个物理的分区（或磁盘）通过软件的组合成为一块看起来是独立的大磁盘（vg），然后再将这块大磁盘再经过分成可以使用的分区（lv），最终就可以挂载使用了。

- 特点：解决扩容、增容，而又不影响原来数据，不需要进行数据的迁移。
- 优点：允许动态的给一个文件系统分配更多的空间

>物理存储介质：指系统的物理存储设备--->磁盘，如，/dev/vda,/dev/vdb等是存储系统最底层的存储单元

> 物理卷（PV）：通常一个分区或者一个硬盘就可以建立一个物理卷，物理卷的最小单位是PE，一般默认是4MB

> 卷组 （VG）：是由一个或多个物理卷所组成的存储池，在卷组上能创建一个或多个逻辑卷

> 逻辑卷（LV）：类似于非LVM的系统中的硬盘分区，建立在卷组之上，是一个标准的块设备，在逻辑卷之上可以建立文件系统

可以做一个设想理解以上三者的关系: 如果把PV比做地球的一个板块，VG则是一个地球，因为地球是由多个版块组成的，那么在地球上划分一个区域并标记为亚洲，则亚洲就相当于一个LV。

LVM的术语定义如下

- PP（物理分区）：用来存储数据的块设备，可以是分区，磁盘，RAID或SAN设备
- PV（物理卷）：LVM的基本存储逻辑块，但和基本的物理存储介质(如分区、磁盘等)比较，却包含有与LVM相关的管理参数。
- VG（卷组）： 卷组是存储池，由一个或多个物理卷组成，一个PV只能分配给一个VG
- LV（逻辑卷）：LVM的逻辑卷类似于非LVM系统中的硬盘分区，在逻辑卷之上可以建立文件系统。
- PE（physical extent）：每一个物理卷被划分为称为PE的基本单元，是LV的最小存储单元，具有唯一编号的PE是可以被LVM寻址的最小单元。PE的大小是可配置的，默认为4MB。
- LE（logical extent）：逻辑卷也被划分为被称为LE的可被寻址的基本单位。在同一个卷组中，LE的大小和PE是相同的，并且一一对应。设置特定LV选项将会更改此映射，例如: 镜像会导致每个LE映射到两个PE。

# LVM架构 
# 创建逻辑卷
# 逻辑卷扩容 
# 基于业务层数据迁移